<!DOCTYPE html>
<html lang="vi">
<head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Báº£ng Ä‘iá»u khiá»ƒn - taskList</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/notification.css') }}">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
      <div class="dashboard-layout">
        <aside class="sidebar">
            <a href="#home" class="sidebar__logo">TaskList</a>
            <nav class="sidebar__nav">
                <a href="/home" class="sidebar__nav-link active"><span>ğŸ“Š</span>Trang chá»§</a>
                <a href="/profile" class="sidebar__nav-link"><span>ğŸ‘¤</span> Há»“ sÆ¡ cÃ¡ nhÃ¢n</a>
                <a href="/tasks" class="sidebar__nav-link"><span>ğŸ“‹</span> Tá»• chá»©c cÃ´ng viá»‡c</a>
                <a href="/team_list" class="sidebar__nav-link"><span>ğŸ‘¥</span> LÃ m viá»‡c nhÃ³m</a>
            </nav>
            <div class="sidebar__footer">
                <a href="/logout" class="sidebar__nav-link"><span>ğŸšª</span> ÄÄƒng xuáº¥t</a>
            </div>
        </aside>

        <main class="main-content">
         
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        flatpickr(".datetime-picker", {
            enableTime: true,
            dateFormat: "Y-m-d\\TH:i:S", // Äáº£m báº£o Ä‘á»‹nh dáº¡ng ISO cho backend
            time_24hr: true,
        });

        // ====== JavaScript cho chá»©c nÄƒng lá»c Task ======
        document.addEventListener('DOMContentLoaded', function() {
            // Láº¥y táº¥t cáº£ cÃ¡c tháº» task-card
            const taskCards = document.querySelectorAll('.task-card');
            // Láº¥y cÃ¡c nÃºt lá»c
            const showAllBtn = document.getElementById('showAllTasks');
            const showFinishedBtn = document.getElementById('showFinishedTasks');
            const showUnfinishedBtn = document.getElementById('showUnfinishedTasks');
            const filterButtons = document.querySelectorAll('.task-list-controls button');
            // Láº¥y pháº§n tá»­ empty-state
            const emptyState = document.querySelector('.empty-state');

            // HÃ m lá»c task
            function filterTasks(status) {
                let anyTaskVisible = false; // Biáº¿n cá» Ä‘á»ƒ kiá»ƒm tra xem cÃ³ task nÃ o hiá»ƒn thá»‹ khÃ´ng

                taskCards.forEach(card => {
                    const taskStatus = card.dataset.status; // Láº¥y tráº¡ng thÃ¡i tá»« data-status cá»§a tháº» task-card

                    // So sÃ¡nh tráº¡ng thÃ¡i Ä‘á»ƒ quyáº¿t Ä‘á»‹nh hiá»ƒn thá»‹ hay áº©n
                    if (status === 'all' || taskStatus === status) {
                        card.classList.remove('hidden'); // Hiá»ƒn thá»‹ task
                        anyTaskVisible = true; // ÄÃ¡nh dáº¥u lÃ  cÃ³ task hiá»ƒn thá»‹
                    } else {
                        card.classList.add('hidden'); // áº¨n task
                    }
                });

                // Cáº­p nháº­t tráº¡ng thÃ¡i vÃ  ná»™i dung cá»§a empty-state
                if (emptyState) { // Äáº£m báº£o pháº§n tá»­ emptyState tá»“n táº¡i
                    if (!anyTaskVisible) {
                        emptyState.style.display = 'block'; // Hiá»ƒn thá»‹ empty-state
                        let message = "";
                        if (status === 'finished') {
                            message = "Hiá»‡n táº¡i chÆ°a cÃ³ cÃ´ng viá»‡c Ä‘Ã£ hoÃ n thÃ nh.";
                        } else if (status === 'unfinished') {
                            message = "Tuyá»‡t vá»i! Báº¡n khÃ´ng cÃ³ cÃ´ng viá»‡c chÆ°a hoÃ n thÃ nh.";
                        } else { // status === 'all'
                            message = "Hiá»‡n táº¡i chÆ°a cÃ³ cÃ´ng viá»‡c nÃ o. HÃ£y táº¡o má»™t cÃ´ng viá»‡c má»›i!";
                        }
                        emptyState.querySelector('p').textContent = `ğŸ‰ ${message}`;
                    } else {
                        emptyState.style.display = 'none'; // áº¨n empty-state
                    }
                }
            }

            // HÃ m Ä‘áº·t tráº¡ng thÃ¡i active cho nÃºt lá»c
            function setActiveButton(activeButton) {
                filterButtons.forEach(btn => {
                    btn.classList.remove('active'); // XÃ³a active khá»i táº¥t cáº£ cÃ¡c nÃºt
                });
                activeButton.classList.add('active'); // ThÃªm active vÃ o nÃºt Ä‘Æ°á»£c click
            }

            // GÃ¡n sá»± kiá»‡n click cho cÃ¡c nÃºt lá»c
            showAllBtn.addEventListener('click', function() {
                filterTasks('all');
                setActiveButton(this);
            });

            showFinishedBtn.addEventListener('click', function() {
                filterTasks('finished');
                setActiveButton(this);
            });

            showUnfinishedBtn.addEventListener('click', function() {
                filterTasks('unfinished');
                setActiveButton(this);
            });

            // Máº·c Ä‘á»‹nh: Hiá»ƒn thá»‹ táº¥t cáº£ task khi trang Ä‘Æ°á»£c táº£i láº§n Ä‘áº§u
            filterTasks('all');
            setActiveButton(showAllBtn);
        });
    </script>
</body>
</html>